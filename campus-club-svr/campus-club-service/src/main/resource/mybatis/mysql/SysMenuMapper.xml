<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.fjut.gmxx.campusclub.sysmenu.mapper.ISysMenuMapper">

    <resultMap id="sysMenuMap" type="java.util.Map">
        <result column="uuid" property="uuid" javaType="java.lang.String"/>
        <result column="CREATE_TIME" property="createTime" javaType="java.util.Date"/>
        <result column="CREATE_USER" property="createUser" javaType="java.lang.String"/>
        <result column="UPDATE_TIME" property="updateTime" javaType="java.util.Date"/>
        <result column="UPDATE_USER" property="updateUser" javaType="java.lang.String"/>
        <result column="DEL_IND" property="delInd" javaType="java.lang.String"/>
        <result column="VERSION" property="version" javaType="java.lang.Integer"/>

        <result column="remark" property="remark" javaType="java.lang.String"/>
        <result column="status_cd" property="statusCd" javaType="java.lang.String"/>
        <result column="leaf_flag_cd" property="leafFlagCd" javaType="java.lang.String"/>
        <result column="menu_code" property="menuCode" javaType="java.lang.String"/>
        <result column="menu_name" property="menuName" javaType="java.lang.String"/>
        <result column="parent_menu_code" property="parentMenuCode" javaType="java.lang.String"/>
        <result column="sort" property="sort" javaType="java.lang.String"/>
        <result column="url" property="url" javaType="java.lang.String"/>
        <result column="role_code" property="role_code" javaType="java.lang.String"/>
        <result column="icon" property="icon" javaType="java.lang.String"/>
    </resultMap>

    <sql id="column_list">
        sys_menu.uuid,
        sys_menu.remark,
        sys_menu.status_cd,
        sys_menu.leaf_flag_cd,
        sys_menu.menu_code,
        sys_menu.menu_name,
        sys_menu.parent_menu_code,
        sys_menu.sort,
        sys_menu.url,
        sys_menu.role_code,
        sys_menu.icon,
        sys_menu.CREATE_TIME,
        sys_menu.CREATE_USER,sys_menu.UPDATE_USER,
        sys_menu.UPDATE_TIME, sys_menu.DEL_IND,
        sys_menu.VERSION
    </sql>

    <sql id="where_filters">
        <where>

            <if test="uuid!=null and uuid!=''">AND sys_menu.uuid = #{uuid}</if>
            <if test="createTime!=null and createTime!=''">AND sys_menu.create_time = #{createTime}</if>
            <if test="createUser!=null and createUser!=''">AND sys_menu.create_user = #{createUser}</if>
            <if test="delInd!=null and delInd!=''">AND sys_menu.del_ind = #{delInd}</if>
            <if test="remark!=null and remark!=''">AND sys_menu.remark = #{remark}</if>
            <if test="statusCd!=null and statusCd!=''">AND sys_menu.status_cd = #{statusCd}</if>
            <if test="updateTime!=null and updateTime!=''">AND sys_menu.update_time = #{updateTime}</if>

            <!--使用&gt;=(>=) &lt;=(<=)方式-->
            <if test="startTime!=null and startTime!=''">AND sys_menu.create_time &gt;= #{startTime}</if>
            <if test="endTime!=null and endTime!=''">AND sys_menu.create_time &lt;= #{endTime}</if>

            <!--使用CDATA方式-->
            <!--<if test="startTime!=null and startTime!=''">AND sys_menu.createTime <![CDATA[>=]]> #{startTime}</if>-->
            <!--<if test="endTime!=null and endTime!=''">AND sys_menu.createTime <![CDATA[<=]]> #{endTime}</if>-->

            <!-- BETWEEN  AND 方式-->
            <!--<if test="startTime!=null and startTime!='' and endTime!=null and endTime!=''">AND biz_cst_bsc_inf.ENTP_FD_DT  BETWEEN #{startTime} AND #{endTime}</if>-->
            <!--<if test="entpFdDt!=null and entpFdDt!=''">AND sys_menu.createTime = #{entpFdDt}</if>-->

            <if test="updateUser!=null and updateUser!=''">AND sys_menu.update_user = #{updateUser}</if>
            <if test="version!=null and version!=''">AND sys_menu.version = #{version}</if>
            <if test="leafFlagCd!=null and leafFlagCd!=''">AND sys_menu.leaf_flag_cd = #{leafFlagCd}</if>
            <if test="menuCode!=null and menuCode!=''">AND sys_menu.menu_code = #{menuCode}</if>

            <if test="menuName!=null and menuName!=''">AND sys_menu.menu_name like concat("%",#{menuName},"%")</if>
            <!--<if test="menuName!=null and menuName!=''">AND sys_menu.menu_name = #{menuName}</if>-->

            <if test="parentMenuCode!=null and parentMenuCode!=''">AND sys_menu.parent_menu_code = #{parentMenuCode}</if>
            <if test="sort!=null and sort!=''">AND sys_menu.sort = #{sort}</if>
            <if test="url!=null and url!=''">AND sys_menu.url = #{url}</if>
            <if test="roleCode!=null and roleCode!=''">AND sys_menu.role_code = #{roleCode}</if>
            <if test="initRolcode!=null and initRolcode!=''">AND sys_menu.role_code  like concat("%",#{initRolcode},"%")</if>
            <if test="icon!=null and icon!=''">AND sys_menu.icon = #{icon}</if>
        </where>
    </sql>

    <sql id="pagination">
        <if test="startIndex != null and pageSize!= null ">
            <![CDATA[
                LIMIT #{startIndex},#{pageSize}
            ]]>
        </if>
    </sql>


    <!--根据条件查询列表-->
    <select id="findSysMenuList" parameterType="map" resultMap="sysMenuMap">
        SELECT
        <include refid="column_list"/>
        FROM sys_menu sys_menu
        <include refid="where_filters"/>
        ORDER BY sys_menu.CREATE_TIME DESC
        <include refid="pagination" />
    </select>

    <select id="findSysMenuListAll" parameterType="map" resultMap="sysMenuMap">
        SELECT
        <include refid="column_list"/>
        FROM sys_menu sys_menu
        <include refid="where_filters"/>
        ORDER BY sys_menu.CREATE_TIME DESC
    </select>

</mapper>